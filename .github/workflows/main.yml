name: Deploy to GitHub Pages
on:
  push:
    branches:
      - main
jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: make checkout folder for source
        run: |
           mkdir src && cd src   
           git clone https://github.com/P0C-demo/income-tax-mtd-end-to-end-service-guide.git
      - name: checkout destination
        run: |
           mkdir dest && cd dest
           git clone https://github.com/P0C-demo/P0C-demo.github.io.git   
      - name: copy and commit
        run: |         
           cp -r src/income-tax-mtd-end-to-end-service-guide/build/*  dest/P0C-demo.github.io/
      - name: Commit
        run: |
           cd dest/P0C-demo.github.io
           ls
           git config user.name "Github.Action"
           git config user.email "deliverablestangible@gmail.com"
           git add .
           git commit -m "Deploy to GitHub Pages"
           git push https://${{ secrets.PAT }}@github.com/P0C-demo/P0C-demo.github.io.git
